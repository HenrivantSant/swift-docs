<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Swift Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Swift Blog Atom Feed"><title data-react-helmet="true">GraphQL | Swift</title><meta data-react-helmet="true" property="og:url" content="https://henrivantsant.github.io/docs/graphql"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="GraphQL | Swift"><meta data-react-helmet="true" name="description" content="The GraphQl component integrates a GraphQl endpoint as alternative for REST endpoints. Queries and Mutation can both be registered as methods on controllers."><meta data-react-helmet="true" property="og:description" content="The GraphQl component integrates a GraphQl endpoint as alternative for REST endpoints. Queries and Mutation can both be registered as methods on controllers."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://henrivantsant.github.io/docs/graphql"><link data-react-helmet="true" rel="alternate" href="https://henrivantsant.github.io/docs/graphql" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://henrivantsant.github.io/docs/graphql" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.f718ee0b.css">
<link rel="preload" href="/assets/js/styles.bd19ecd5.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.ffc07633.js" as="script">
<link rel="preload" href="/assets/js/main.197b54ee.js" as="script">
<link rel="preload" href="/assets/js/1.aed57205.js" as="script">
<link rel="preload" href="/assets/js/2.f7343cf3.js" as="script">
<link rel="preload" href="/assets/js/3.ded61b39.js" as="script">
<link rel="preload" href="/assets/js/1be78505.bf7b15ad.js" as="script">
<link rel="preload" href="/assets/js/48.f36fa445.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.a9e8fcf1.js" as="script">
<link rel="preload" href="/assets/js/17896441.860de004.js" as="script">
<link rel="preload" href="/assets/js/5043549d.680f114e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Swift</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/next">Next</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Swift</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/next">Next</a></li><li class="menu__list-item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started/installation">Installation</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/attributes">Attributes</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/command-line-interface">Command line interface</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/database">Database layer</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dependency-injection">Dependency Injection</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/events-and-subscribers">Events &amp; Subscribers</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/graphql">GraphQL</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/httpfoundation">HTTP Foundation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/logging">Logging</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/making-requests">Making requests</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/routing">Routing &amp; Controllers</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/security/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/security/authentication">Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/security/authorization">Authorization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/security/users">Users (&amp; Clients)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/security/firewall">Firewall</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">GraphQL</h1></header><div class="markdown"><p>The GraphQl component integrates a GraphQl endpoint as alternative for REST endpoints. Queries and Mutation can both be registered as methods on controllers.</p><p>The GraphQl implementation fully complies with the <a href="http://spec.graphql.org/" target="_blank" rel="noopener noreferrer">GraphQl Spec</a> and is basically a wrapper for <a href="https://github.com/webonyx/graphql-php" target="_blank" rel="noopener noreferrer">Webonxy GraphQl</a>.</p><p>Types, Queries and Mutations are mapped through the use of Attributes. Besides this some handy utilities have been added the make it all work nicely with the rest of the framework.</p><p>Security endpoints are provided out of the box. So client and user authentication will work right away.</p><p>Note that the documentation provided by Webonyx is only partially helpful since Webonyx is a almost literal translation of the Javascript Spec it&#x27;s functional by design, where Swift is Object Oriented. The component wraps Webonyx in Object Oriented way and provides utilities for easy usage and integration to the rest of the application.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="endpoint"></a>Endpoint<a class="hash-link" href="#endpoint" title="Direct link to heading">#</a></h2><p>GraphQl can be enabled with setting this is in the etc/app.yaml config. This will automatically enable the /graphql endpoint.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">graphql</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">enable_introspection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tools"></a>Tools<a class="hash-link" href="#tools" title="Direct link to heading">#</a></h2><p>A tool that is highly recommended for building GraphQl endpoints is <a href="https://github.com/graphql/graphiql" target="_blank" rel="noopener noreferrer">GraphiQL</a>. This will inspect your endpoint, visual the schema and let&#x27;s you execute queries and mutations against your schema.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="attributes"></a>Attributes<a class="hash-link" href="#attributes" title="Direct link to heading">#</a></h2><p>Attributes are used to tell the compiler about possible types, fields, queries, mutations, etc. On compilation all those are mapped and stored in Type Registries.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="query"></a>Query<a class="hash-link" href="#query" title="Direct link to heading">#</a></h3><p>Queries are the entry points in your Schema. A Query can easily be defined as below by adding the Query Attribute. The compiler will use PHP Types to translate this to types for the Schema. However some fields can be overridden or specific differently if desired. Those settings will take precedence over PHP Types if provided. See below for the options.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">declare(strict_types=1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Foo\Controller;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Foo\Type\BarType;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Foo\Type\FooType;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\Controller\AbstractController;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\GraphQl\Attributes\Query;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Class FooControllerGraphQl</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @package Foo\Controller</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class FooControllerGraphQl extends AbstractController {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param FooType $foo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @return BarType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[Query]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function foo( FooType $foo ): BarType {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // Fetch some data here</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return new BarType(id: $foo-&gt;id, title: &#x27;GraphQl result title&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">declare(strict_types=1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Swift\GraphQl\Attributes;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Attribute;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\Kernel\Attributes\DI;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Class Query</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @package Swift\GraphQl\Attributes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[Attribute(Attribute::TARGET_METHOD), DI(exclude: true)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Query {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * Query constructor.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param mixed $type</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param bool $nullable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param bool $isList</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $generator</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param array $generatorArguments</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $description</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function __construct(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public string $name = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public mixed $type = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public bool $nullable = true,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public bool $isList = false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public string $generator = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public array $generatorArguments = array(),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public string|null $description = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="foo-example-query-in-action"></a>Foo example query in action<a class="hash-link" href="#foo-example-query-in-action" title="Direct link to heading">#</a></h4><p><em>Request:</em></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly graphql"><div tabindex="0" class="prism-code language-graphql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">query</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token attr-name" style="color:rgb(255, 203, 107)">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        title</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        author </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reviews</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">limit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            username</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            content</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><em>Response:</em></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Foo&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;title&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GraphQl result title&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;author&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Foo Bar&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;reviews&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;username&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Foo&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;content&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Lorem ipsum dolor&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;username&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Bar&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;content&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Lorem ipsum dolor&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;username&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Fubar&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;content&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Lorem ipsum dolor&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="mutation"></a>Mutation<a class="hash-link" href="#mutation" title="Direct link to heading">#</a></h3><p>Mutations are created in a very similar way. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">declare(strict_types=1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Foo\Controller;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Foo\Type\BarInput;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Foo\Type\BarType;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\Controller\AbstractController;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\GraphQl\Attributes\Mutation;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Class FooControllerGraphQl</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @package Foo\Controller</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class FooControllerGraphQl extends AbstractController {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param BarInput $bar</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @return BarType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[Mutation]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function createBar( BarInput $bar ): BarType {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // Create new entity based on input and return it&#x27;s values</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return new BarType(id: &#x27;4&#x27;, title: $bar-&gt;title);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="createbar-mutation-in-action"></a>createBar mutation in action<a class="hash-link" href="#createbar-mutation-in-action" title="Direct link to heading">#</a></h4><p><em>Request:</em></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly graphql"><div tabindex="0" class="prism-code language-graphql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    CreateBar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">bar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token attr-name" style="color:rgb(255, 203, 107)">title</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Demo Bar&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        title</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><em>Response:</em></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;CreateBar&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;4&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;title&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Demo Bar&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="type"></a>Type<a class="hash-link" href="#type" title="Direct link to heading">#</a></h3><p>As seen in the example above we&#x27;re using a defined types and not one the default composites. In order to use those specific types we need to let the compiler know those exist on before hand. This is done with the Type Attribute. This will mark the given class as an OutputType.</p><p>In the example we&#x27;re keeping it simple, but you might just as well link to other types here link for example the Author of Bar.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="default-value--nullable"></a>Default value / nullable<a class="hash-link" href="#default-value--nullable" title="Direct link to heading">#</a></h4><p>By giving a field default value it will automatically be nullable too. By optionally having it null, it will &#x27;just&#x27; be nullable.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">declare(strict_types=1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Foo\Type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\GraphQl\Attributes\Field;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\GraphQl\Attributes\Type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\Kernel\Attributes\Autowire;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\Model\EntityInterface;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Class BarType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @package Foo\Type</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[Type]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class BarType {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    private EntityInterface $fooRepository;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * FooType constructor.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string $id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string $title</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function __construct(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        #[Field] public string $id,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        #[Field] public string $title,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[Field(name: &#x27;author&#x27;, description: &#x27;This is a field description&#x27;)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function getAuthor(): AuthorType {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return new AuthorType(id: &#x27;3&#x27;, name: &#x27;Foo Bar&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[Field(name: &#x27;reviews&#x27;, type: ReviewType::class, isList: true)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function getReviews(int $limit = 5): array {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return array_slice(array(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            new ReviewType(id: &#x27;1&#x27;, username: &#x27;Foo&#x27;, content: &#x27;Lorem ipsum dolor&#x27;),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            new ReviewType(id: &#x27;2&#x27;, username: &#x27;Bar&#x27;, content: &#x27;Lorem ipsum dolor&#x27;),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            new ReviewType(id: &#x27;3&#x27;, username: &#x27;Fubar&#x27;, content: &#x27;Lorem ipsum dolor&#x27;),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ), 0, $limit);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[Autowire]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function setFooRepository(EntityInterface $fooRepository): void {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        $this-&gt;fooRepository = $fooRepository;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">declare(strict_types=1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Swift\GraphQl\Attributes;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Attribute;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\Kernel\Attributes\DI;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Class Type</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @package Swift\GraphQl\Attributes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[Attribute(Attribute::TARGET_CLASS), DI(exclude: true)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Type {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * Type constructor.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $extends</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $generator</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param array $generatorArguments</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $description</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function __construct(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public ?string $name = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public ?string $extends = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public ?string $generator = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public array $generatorArguments = array(),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        private string|null $description = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="inputtype"></a>InputType<a class="hash-link" href="#inputtype" title="Direct link to heading">#</a></h3><p>An InputType quite surprisingly registers the Attributed class to an InputType. Those can be used as the arguments/input for queries and mutations.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">declare(strict_types=1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Foo\Type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\GraphQl\Attributes\Field;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\GraphQl\Attributes\InputType;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\GraphQl\Types\Type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Class FooType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @package Foo\Type</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[InputType]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class FooType {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * FooType constructor.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string $id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function __construct(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        #[Field(type: Type::ID)] public string $id,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">declare(strict_types=1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Swift\GraphQl\Attributes;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Attribute;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\Kernel\Attributes\DI;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Class Type</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @package Swift\GraphQl\Attributes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[Attribute(Attribute::TARGET_CLASS), DI(exclude: true)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class InputType {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * Type constructor.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $extends</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $generator</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param array $generatorArguments</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $description </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function __construct(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public ?string $name = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public ?string $extends = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public ?string $generator = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public array $generatorArguments = array(),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public string|null $description = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="field"></a>Field<a class="hash-link" href="#field" title="Direct link to heading">#</a></h3><p>The field annotation is used to let the compiled know a property or method should be registered as a field within a Type or InputType. This only works within classes having the either the Type o InputType Attribute.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">declare(strict_types=1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Foo\Type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\GraphQl\Attributes\Field;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\GraphQl\Attributes\Type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Class BarType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @package Foo\Type</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[Type]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class BarType {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * FooType constructor.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string $id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string $title</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function __construct(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        #[Field] public string $id,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        #[Field] public string $title,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[Field(name: &#x27;author&#x27;, description: &#x27;This is a field description&#x27;)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function getAuthor(): AuthorType {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return new AuthorType(id: &#x27;3&#x27;, name: &#x27;Foo Bar&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[Field(name: &#x27;reviews&#x27;, type: ReviewType::class, isList: true)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function getReviews(int $limit = 5): array {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return array_slice(array(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            new ReviewType(id: &#x27;1&#x27;, username: &#x27;Foo&#x27;, content: &#x27;Lorem ipsum dolor&#x27;),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            new ReviewType(id: &#x27;2&#x27;, username: &#x27;Bar&#x27;, content: &#x27;Lorem ipsum dolor&#x27;),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            new ReviewType(id: &#x27;3&#x27;, username: &#x27;Fubar&#x27;, content: &#x27;Lorem ipsum dolor&#x27;),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ), 0, $limit);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="argument"></a>Argument<a class="hash-link" href="#argument" title="Direct link to heading">#</a></h3><p>The Argument attribute can be used to add additional meta data or settings to mutation or query arguments. They also serve to link to generators. They example below shows the GraphQl endpoint to list all users. It uses a generator to dynamically create a complex input type based on the OutputType and the Entity it references to.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * GraphQl endpoint for listing users</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @param array $filter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @return UserConnection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[Query(name: &#x27;Users&#x27;, description: &#x27;List all users&#x27; )]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public function users( #[Argument(type: ArgumentsType::class, generator: EntityArgumentGenerator::class, generatorArguments: [&#x27;entity&#x27; =&gt; UserEntity::class])] array $filter ): UserConnection {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Make sure a user is authenticated</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $this-&gt;denyAccessUnlessGranted([AuthorizationRolesEnum::ROLE_USERS_LIST]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $filter ??= array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $state = $filter[&#x27;where&#x27;] ?? array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    unset($filter[&#x27;where&#x27;]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $argumentsType = new ArgumentsType(...$filter);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (!$result = $this-&gt;userDatabaseStorage-&gt;findMany($state, $argumentsType-&gt;toArgument())) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return new UserConnection($result);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return new UserConnection($result);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">declare(strict_types=1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Swift\GraphQl\Attributes;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Attribute;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Class Argument</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @package Swift\GraphQl\Attributes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[Attribute(Attribute::TARGET_PARAMETER)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Argument {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * Argument constructor.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $name argument name in the schema</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|array|null $type array of types will lead to a union</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $generator FQN of the generator class </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param array|null $generatorArguments Arguments to be passed to the generator</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string|null $description </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function __construct(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public string|null $name = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public string|array|null $type = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public string|null $generator = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public array|null $generatorArguments = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public string|null $description = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="generators"></a>Generators<a class="hash-link" href="#generators" title="Direct link to heading">#</a></h3><p>No feature freeze just yet. Documentation will follow.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="autowire-in-types"></a>Autowire in types<a class="hash-link" href="#autowire-in-types" title="Direct link to heading">#</a></h2><p>Since type definitions should be able to be created easily the constructor can not directly depend on Dependency Injection from the container. However method injection is supported.</p><p>Once the Field Resolver calls the Type to resolve a given field it will call all Autowire methods. Note that this happens on Field Resolution and not on Container Compilation. So you can only depend on the Services being set in the actual Field methods.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">declare(strict_types=1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Foo\Type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\GraphQl\Attributes\Field;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\GraphQl\Attributes\Type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\Kernel\Attributes\Autowire;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use Swift\Model\EntityInterface;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Class BarType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @package Foo\Type</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[Type]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class BarType {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    private EntityInterface $fooRepository;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * FooType constructor.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string $id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param string $title</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function __construct(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        #[Field] public string $id,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        #[Field] public string $title,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[Field(name: &#x27;author&#x27;, description: &#x27;This is a field description&#x27;)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function getAuthor(): AuthorType {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return new AuthorType(id: &#x27;3&#x27;, name: &#x27;Foo Bar&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[Field(name: &#x27;reviews&#x27;, type: ReviewType::class, isList: true)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function getReviews(int $first = 5): array {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // Here we can assume $this-&gt;fooRepository to autowired</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return array_slice(array(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            new ReviewType(id: &#x27;1&#x27;, username: &#x27;Foo&#x27;, content: &#x27;Lorem ipsum dolor&#x27;),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            new ReviewType(id: &#x27;2&#x27;, username: &#x27;Bar&#x27;, content: &#x27;Lorem ipsum dolor&#x27;),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            new ReviewType(id: &#x27;3&#x27;, username: &#x27;Fubar&#x27;, content: &#x27;Lorem ipsum dolor&#x27;),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ), 0, $first);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[Autowire]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public function setFooRepository(EntityInterface $fooRepository): void {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        $this-&gt;fooRepository = $fooRepository;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="schema-generation"></a>Schema generation<a class="hash-link" href="#schema-generation" title="Direct link to heading">#</a></h2><p>It might be handy or even needed to generate a schema.graphql file of your api in actual Type Language. This is easily done by running: </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">bin/console graphql:schema:dump</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This will automatically generate graphql schema representation of the api in the /etc directory.</p><p>The Abstract classes enforce you to create a little logic and create all common fields and handle ID encoding too.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="relay-server-spec"></a>Relay Server Spec<a class="hash-link" href="#relay-server-spec" title="Direct link to heading">#</a></h2><p>It is recommended to follow the <a href="https://relay.dev/docs/guides/graphql-server-specification/" target="_blank" rel="noopener noreferrer">Relay Server Specs</a> in the schema. All default Swift endpoint will comply with this spec out of the box. There&#x27;s some useful abstracts and interfaces to help you on the way.</p><ul><li><p><code>Swift\GraphQl\Types\AbstractConnectionType</code> or <code>Swift\GraphQl\Types\ConnectionTypeInterface</code></p></li><li><p><code>Swift\GraphQl\Types\AbstractEdgeType</code> or <code>Swift\GraphQl\Types\EdgeInterface</code></p></li><li><p><code>Swift\GraphQl\Types\NodeTypeInterface</code><br>
As the Relay Spec defines any Node Type should be able to resolve against the Interface. To be able to resolve this the Node Type should return a resolver class and method for the given type. See example below.
<em>Type</em></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  declare(strict_types=1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace Swift\Security\User\Type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  use DateTime;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  use Swift\GraphQl\Attributes\Field;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  use Swift\GraphQl\Attributes\Type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  use Swift\GraphQl\ContextInterface;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  use Swift\GraphQl\Types\NodeTypeInterface;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  use Swift\GraphQl\Utils;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  use Swift\Kernel\Attributes\DI;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  use Swift\Security\User\Controller\UserControllerGraphQl;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  * Class UserType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  * @package Swift\Security\User\Type</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  #[DI(autowire: false), Type(description: &#x27;Represents user data&#x27;)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  class UserType implements NodeTypeInterface {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       * UserType constructor.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       * @param int|null $id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       * @param string $username</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       * @param string|null $email</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       * @param string $firstname</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       * @param string $lastname</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       * @param DateTime $created</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       * @param DateTime $modified</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       * @param string|null $password</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      public function __construct(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          public ?int $id,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          #[Field] public string $username,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          #[Field(nullable: true)] public ?string $email,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          #[Field] public string $firstname,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          #[Field] public string $lastname,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          #[Field] public DateTime $created,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          #[Field] public DateTime $modified,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          private string|null $password = null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      #[Field( name: &#x27;id&#x27;, description: &#x27;The user ID&#x27; )]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      public function getId(): string {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           return Utils::encodeId(&#x27;UserType&#x27;, $this-&gt;id);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       * @inheritDoc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      public static function getNodeResolverClassnameAndMethod( int|string $id, ContextInterface $context ): array {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          return [UserControllerGraphQl::class, &#x27;getUserTypeByNode&#x27;];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><em>Resolver method in referred controller (Swift\Security\User\Controller\UserControllerGraphQl)</em></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  * Node field resolver callback function for UserType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  * @param string|int $id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  * @param ContextInterface $context</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  * @return UserType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  public function getUserTypeByNode( string|int $id, ContextInterface $context ): UserType {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      // Make sure a user is authenticated</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      $this-&gt;denyAccessUnlessGranted([AuthorizationTypesEnum::IS_AUTHENTICATED, AuthorizationRolesEnum::ROLE_USERS_LIST]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      // Get user data</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      if (!$data = $this-&gt;userProvider-&gt;getUserById((int) $id)?-&gt;serialize()) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          throw new UserNotFoundException(sprintf(&#x27;User with id %s not found&#x27;, $id));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return new UserType(...(array) $data);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p><code>Swift\GraphQl\Types\PageInfoType</code><br>
Use <code>Swift\GraphQl\Types\PageInfoType-&gt;toArgument()</code> to build an Argument() class for filter usage on any Entity.<br>
<em>Example usage of ArgumentsType to Argument</em></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   * GraphQl endpoint for listing users</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   * @param array $filter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   * @return UserConnection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  #[Query(name: &#x27;Users&#x27;, description: &#x27;List all users&#x27; )]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  public function users( #[Argument(type: ArgumentsType::class, generator: EntityArgumentGenerator::class, generatorArguments: [&#x27;entity&#x27; =&gt; UserEntity::class])] array $filter ): UserConnection {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      // Make sure a user is authenticated</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      $this-&gt;denyAccessUnlessGranted([AuthorizationRolesEnum::ROLE_USERS_LIST]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      $filter ??= array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      $state = $filter[&#x27;where&#x27;] ?? array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      unset($filter[&#x27;where&#x27;]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      $argumentsType = new ArgumentsType(...$filter);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      if (!$result = $this-&gt;userDatabaseStorage-&gt;findMany($state, $argumentsType-&gt;toArgument())) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          return new UserConnection($result);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return new UserConnection($result);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/HenrivantSant/swift/docs/docs/graphql.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/events-and-subscribers"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Events &amp; Subscribers</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/httpfoundation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">HTTP Foundation Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#endpoint" class="table-of-contents__link">Endpoint</a></li><li><a href="#tools" class="table-of-contents__link">Tools</a></li><li><a href="#attributes" class="table-of-contents__link">Attributes</a><ul><li><a href="#query" class="table-of-contents__link">Query</a></li><li><a href="#mutation" class="table-of-contents__link">Mutation</a></li><li><a href="#type" class="table-of-contents__link">Type</a></li><li><a href="#inputtype" class="table-of-contents__link">InputType</a></li><li><a href="#field" class="table-of-contents__link">Field</a></li><li><a href="#argument" class="table-of-contents__link">Argument</a></li><li><a href="#generators" class="table-of-contents__link">Generators</a></li></ul></li><li><a href="#autowire-in-types" class="table-of-contents__link">Autowire in types</a></li><li><a href="#schema-generation" class="table-of-contents__link">Schema generation</a></li><li><a href="#relay-server-spec" class="table-of-contents__link">Relay Server Spec</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Swift. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/styles.bd19ecd5.js"></script>
<script src="/assets/js/runtime~main.ffc07633.js"></script>
<script src="/assets/js/main.197b54ee.js"></script>
<script src="/assets/js/1.aed57205.js"></script>
<script src="/assets/js/2.f7343cf3.js"></script>
<script src="/assets/js/3.ded61b39.js"></script>
<script src="/assets/js/1be78505.bf7b15ad.js"></script>
<script src="/assets/js/48.f36fa445.js"></script>
<script src="/assets/js/935f2afb.a9e8fcf1.js"></script>
<script src="/assets/js/17896441.860de004.js"></script>
<script src="/assets/js/5043549d.680f114e.js"></script>
</body>
</html>